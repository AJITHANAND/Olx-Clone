const $=Math.min,_=Math.max,R=Math.round,E=Math.floor,x=t=>({x:t,y:t});function q(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function B(t){return V(t)?(t.nodeName||"").toLowerCase():"#document"}function h(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function I(t){var e;return(e=(V(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function V(t){return t instanceof Node||t instanceof h(t).Node}function N(t){return t instanceof Element||t instanceof h(t).Element}function S(t){return t instanceof HTMLElement||t instanceof h(t).HTMLElement}function A(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof h(t).ShadowRoot}function H(t){const{overflow:e,overflowX:n,overflowY:o,display:r}=T(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(r)}function U(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function k(t){return["html","body","#document"].includes(B(t))}function T(t){return h(t).getComputedStyle(t)}function K(t){if(B(t)==="html")return t;const e=t.assignedSlot||t.parentNode||A(t)&&t.host||I(t);return A(e)?e.host:e}function W(t){const e=K(t);return k(e)?t.ownerDocument?t.ownerDocument.body:t.body:S(e)&&H(e)?e:W(e)}function C(t,e){var n;e===void 0&&(e=[]);const o=W(t),r=o===((n=t.ownerDocument)==null?void 0:n.body),i=h(o);return r?e.concat(i,i.visualViewport||[],H(o)?o:[],i.frameElement?C(i.frameElement):[]):e.concat(o,C(o))}function X(t){const e=T(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const r=S(t),i=r?t.offsetWidth:n,s=r?t.offsetHeight:o,f=R(n)!==i||R(o)!==s;return f&&(n=i,o=s),{width:n,height:o,$:f}}function D(t){return N(t)?t:t.contextElement}function O(t){const e=D(t);if(!S(e))return x(1);const n=e.getBoundingClientRect(),{width:o,height:r,$:i}=X(e);let s=(i?R(n.width):n.width)/o,f=(i?R(n.height):n.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!f||!Number.isFinite(f))&&(f=1),{x:s,y:f}}const Y=x(0);function j(t){const e=h(t);return!U()||!e.visualViewport?Y:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function G(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==h(t)?!1:e}function z(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=D(t);let s=x(1);e&&(o?N(o)&&(s=O(o)):s=O(t));const f=G(i,n,o)?j(i):x(0);let d=(r.left+f.x)/s.x,l=(r.top+f.y)/s.y,w=r.width/s.x,v=r.height/s.y;if(i){const g=h(i),a=o&&N(o)?h(o):o;let m=g.frameElement;for(;m&&o&&a!==g;){const u=O(m),p=m.getBoundingClientRect(),c=T(m),y=p.left+(m.clientLeft+parseFloat(c.paddingLeft))*u.x,b=p.top+(m.clientTop+parseFloat(c.paddingTop))*u.y;d*=u.x,l*=u.y,w*=u.x,v*=u.y,d+=y,l+=b,m=h(m).frameElement}}return q({width:w,height:v,x:d,y:l})}function J(t,e){let n=null,o;const r=I(t);function i(){clearTimeout(o),n&&n.disconnect(),n=null}function s(f,d){f===void 0&&(f=!1),d===void 0&&(d=1),i();const{left:l,top:w,width:v,height:g}=t.getBoundingClientRect();if(f||e(),!v||!g)return;const a=E(w),m=E(r.clientWidth-(l+v)),u=E(r.clientHeight-(w+g)),p=E(l),y={rootMargin:-a+"px "+-m+"px "+-u+"px "+-p+"px",threshold:_(0,$(1,d))||1};let b=!0;function F(M){const L=M[0].intersectionRatio;if(L!==d){if(!b)return s();L?s(!1,L):o=setTimeout(()=>{s(!1,1e-7)},100)}b=!1}try{n=new IntersectionObserver(F,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(F,y)}n.observe(t)}return s(!0),i}function Q(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:d=!1}=o,l=D(t),w=r||i?[...l?C(l):[],...C(e)]:[];w.forEach(c=>{r&&c.addEventListener("scroll",n,{passive:!0}),i&&c.addEventListener("resize",n)});const v=l&&f?J(l,n):null;let g=-1,a=null;s&&(a=new ResizeObserver(c=>{let[y]=c;y&&y.target===l&&a&&(a.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{a&&a.observe(e)})),n()}),l&&!d&&a.observe(l),a.observe(e));let m,u=d?z(t):null;d&&p();function p(){const c=z(t);u&&(c.x!==u.x||c.y!==u.y||c.width!==u.width||c.height!==u.height)&&n(),u=c,m=requestAnimationFrame(p)}return n(),()=>{w.forEach(c=>{r&&c.removeEventListener("scroll",n),i&&c.removeEventListener("resize",n)}),v&&v(),a&&a.disconnect(),a=null,d&&cancelAnimationFrame(m)}}export{Q as a};
